var contentloaded,fragments=new Map;function fetchFragmentList(){fetch("fragments/aa_fragment.json").then(function(a){if(a.ok)return a.json()}).then(function(a){fetchHTML(a)})}function fetchHTML(a){for(var b,c=[],d=0,e=a;d<e.length;d++)b=e[d],c.push(fetch("fragments/"+b.toString()).then(function(a){if(a.ok)return a.text()}));Promise.all(c).then(function(a){for(var b=0,c=a;b<c.length;b++){var e=c[b],f=stringToDom(e),d=f.getElementById("head").innerHTML.trim();fragments.set(d,f.body)}contentloaded=!0})}function stringToDom(a){var b=new DOMParser;return b.parseFromString(a,"text/html")}var content,back,prev;function handleHashChange(a){var b=a.oldURL.split("#")[1],c=a.newURL.split("#")[1];if(!tour){if("back"===c)return void(c="#back");if("tour"===c)return void startTour();back.setAttribute("href","#"+b),updateView(c)}else{var d=0;if(0<=c.indexOf("tour_next")&&(d=1),0<=c.indexOf("tour_prev")&&(d=-1),"tour_ended"===c)return endTour(),void updateView(c);tourNavigation(d)}}function updateView(a){fragments.has(a)?(content.innerHTML=fragments.get(a).innerHTML,prev=document.getElementById("backvalue")?document.getElementById("backvalue").innerHTML:void 0,bindButton()):console.error(a+" not found")}window.onload=function(){location.hash="#index",bindButton(),content=document.getElementById("content"),back=document.getElementById("backbttn"),prevbttn=document.getElementById("prevbttn"),nextbttn=document.getElementById("nextbttn"),fetchFragmentList()};function bindButton(){for(var a,c=document.getElementsByClassName("clickable"),d=0;d<c.length;d++)a=c[d],a.addEventListener("click",function(a){if(contentloaded)return a.currentTarget.hasAttribute("tour")&&(currenttour=a.currentTarget.getAttribute("tour")),a.currentTarget.classList.contains("back")&&prev?void(location.hash=prev):void(location.hash=a.currentTarget.getAttribute("href"))})}window.onhashchange=handleHashChange;var currenttour,currenttour_sequence,prevbttn,nextbttn,tour=!1,currentindex=-1,tour_modern=["view_gober_untitled","view_x"],tour_classic=["view_korenveld","view_haarlem"],tour_temp=["view_pauw","view_zelf"];function startTour(){currenttour&&""!==currenttour&&("modern"===currenttour?currenttour_sequence=tour_modern:"classic"===currenttour?currenttour_sequence=tour_classic:"temp"===currenttour&&(currenttour_sequence=tour_temp)),back.innerHTML="End Tour",back.setAttribute("href","#tour_ended"),document.getElementById("prevbttn").classList.toggle("tournav"),document.getElementById("nextbttn").classList.toggle("tournav"),tour=!0,tourNavigation(1)}function endTour(){currentindex=-1,back.innerHTML="Back",back.setAttribute("href","#index"),document.getElementById("prevbttn").classList.toggle("tournav"),document.getElementById("nextbttn").classList.toggle("tournav"),tour=!1}function tourNavigation(a){currentindex+=a,0<=currentindex&&currentindex<currenttour_sequence.length?(updateView(currenttour_sequence[currentindex]),nextbttn.setAttribute("href","tour_next"+currentindex),prevbttn.setAttribute("href","tour_prev"+(currentindex-1))):(endTour(),updateView("tour_ended"))}